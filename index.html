<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <meta name="theme-color" content="#06c755" />
  <title>å† æ™ºçš„å¸‚èª¿è©•ä¼°</title>

  <style>
    body {
      font-family: "Helvetica Neue", sans-serif;
      margin: 0;
      padding: 20px;
      background: #f2f2f2;
    }
    .overlay {
      max-width: 480px;
      margin: 0 auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 12px;
    }
    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      box-sizing: border-box;
    }
    button {
      margin-top: 20px;
      padding: 10px;
      width: 100%;
      font-size: 16px;
      background: #06c755;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .qa-card {
      background: #f9f9f9;
      padding: 6px 8px;
      margin-top: 6px;
      font-size: 14px;
    }
    .result-container {
      max-width: 340px;
      margin: 0 auto;
    }
  </style>

  <!-- æˆªåœ–ç”¨å·¥å…· -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>
</head>

<body>
  <div class="overlay">
    <!-- === åŸºæœ¬è³‡æ–™ === -->
    <div id="basicInfoSection">
      <h1>å† æ™ºé—œå¿ƒæ‚¨ï¼å¥æª¢å•å·</h1>

      <label>å§“åï¼š</label>
      <input id="name" type="text" placeholder="ä¾‹å¦‚ ç‹å°æ˜" required />

      <label>è¯çµ¡é›»è©±ï¼š</label>
      <input id="phone" type="tel" placeholder="ä¾‹å¦‚ 0912345678" required />

      <label>Line IDï¼š</label>
      <input id="lineId" type="text" placeholder="ä¾‹å¦‚ myline123" required />

      <label>ç”Ÿæ—¥ï¼š</label>
      <input id="birthday" type="date" required />

      <button id="nextBtn" type="button">ä¸‹ä¸€æ­¥</button>
    </div>

    <!-- === å•å·å€å¡Š === -->
    <div id="questionSection" style="display:none">
      <div class="center-wrapper">
        <div id="jobSection">
          <label for="job">è«‹é¸æ“‡æ‚¨çš„è·æ¥­é¡åˆ¥ï¼š</label>
          <select id="job">
            <option value="">è«‹é¸æ“‡</option>
            <option value="è‡ªç‡Ÿæ¥­è€…">è‡ªç‡Ÿæ¥­è€…</option>
            <option value="é ˜å°ä¸»ç®¡">é ˜å°ä¸»ç®¡</option>
            <option value="ä¸€èˆ¬ä¸Šç­æ—">ä¸€èˆ¬ä¸Šç­æ—</option>
            <option value="è¨ˆç¨‹è»Šå¸æ©Ÿ">è¨ˆç¨‹è»Šå¸æ©Ÿ</option>
            <option value="å…¬è·/é†«ç™‚">å…¬è·/é†«ç™‚</option>
          </select>
        </div>
        <form id="questionForm"></form>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const spinQuestions = {
        "ä¸€èˆ¬ä¸Šç­æ—": [
          { q: "ä½ ç¾åœ¨åšçš„é€™ä»½å·¥ä½œç©©å®šå—ï¼Ÿ", options: ["ç©©å®š", "å¶çˆ¾è®Šå‹•", "å¾ˆä¸ç©©å®š"] },
          { q: "é€™ä»½å·¥ä½œå°ä½ ä¾†èªªå£“åŠ›å¤§ä¸å¤§ï¼Ÿ", options: ["æ­£å¸¸", "å£“åŠ›å¤§", "éå¸¸ç–²æ†Š"] },
          { q: "ä½ ç›®å‰æœ‰å›ºå®šåœ¨å„²è“„å—ï¼Ÿé‚„æ˜¯å­˜äº†å°±èŠ±ï¼Ÿ", options: ["æœ‰å›ºå®šå­˜","å¹¾ä¹æ²’å­˜"] },
          { q: "å…¬å¸æœ‰ææ’¥å‹é€€ï¼Œä½ é‚„æœ‰å¦å¤–è¦åŠƒé€€ä¼‘é‡‘å—ï¼Ÿ", options: ["æœ‰é¡å¤–è¦åŠƒ", "æƒ³è¦åŠƒä½†é‚„æ²’åš", "æ²’æœ‰è¦åŠƒ"] },
          { q: "è‹¥çªç™¼å¤§ç­†æ”¯å‡ºï¼ˆå®¶äººç”Ÿç—…é†«ç™‚è²»ç­‰ï¼‰ï¼Œä½ è¦ºå¾—å¤ ç”¨å—ï¼Ÿ", options: ["å¯èƒ½å¤ ", "å®Œå…¨æ²’æœ‰æº–å‚™"] },
          { q: "é€€ä¼‘å¾Œå‹é€€æ¯æœˆ2è¬çš„ç”Ÿæ´»è²»ä½ è¦ºå¾—å¤ å—ï¼Ÿ", options: ["æ‡‰è©²å¤ ç”¨","é‚„æƒ³æ›´å¤š"] },
          { q: "è‹¥è£å“¡æˆ–ç”Ÿç—…ç„¡æ³•ä¸Šç­å¹¾å€‹æœˆï¼Œç”Ÿæ´»é–‹éŠ·æœ‰å€‹å‚™æ¡ˆå—ï¼Ÿ", options: ["æœ‰ä¸€ç­†ç·Šæ€¥é¿é›£é‡‘", "æœ‰æƒ³éä½†é‚„æ²’æº–å‚™"] },
          { q: "å¦‚æœæœ‰å€‹æ–¹å¼ï¼Œå¯ä»¥æ¯æœˆå¹«ä½ å­˜ä¸€é»ï¼Œæœªä¾†è®Šæˆä¸€ç­†é€€ä¼‘è£œè²¼ï¼Œæˆ–é‡æ€¥ç”¨ä¹Ÿèƒ½ç”¨ï¼Œä½ è¦ºå¾—é‡è¦å—ï¼Ÿ", options: ["é‡è¦", "é‚„å¥½"] },
          { q: "é€™ç¨®æ–¹å¼å°±åƒå¹«è‡ªå·±æº–å‚™ä¸€å€‹ã€å‚™ç”¨é›»æ± ã€ï¼Œä½ æƒ³äº†è§£å—ï¼Ÿ", options: ["æƒ³äº†è§£", "è§€æœ›"] }
        ],
        "è‡ªç‡Ÿæ¥­è€…": [
          { q: "ä½ ç›®å‰ç”Ÿæ„ç©©å®šå—ï¼Ÿ", options: ["ç©©å®š", "å¶çˆ¾æ³¢å‹•"] },
          { q: "ä½ è¦ºå¾—ç•¶è€é—†ä¸€äººå¤šè·è¾›è‹¦å—ï¼Ÿ", options: ["å¯æ¥å—", "ç•¥è¾›è‹¦"] },
          { q: "ä½ å›ºå®šå­˜éŒ¢ï¼Ÿé‚„æ˜¯å…¨éƒ¨æŠ•å…¥äº‹æ¥­ï¼Ÿ", options: ["å›ºå®šå­˜éŒ¢", "å°‘é‡å­˜æ¬¾", "å…¨éƒ¨æŠ•å…¥"] },
          { q: "è€é—†æ²’æœ‰å‹é€€ï¼Œä½ æœ‰è‡ªä¸»é€€ä¼‘æˆ–æŠ•è³‡è¦åŠƒå—ï¼Ÿ", options: ["éƒ¨åˆ†æœ‰å®‰æ’", "é‚„æ²’æœ‰æƒ³é"] },
          { q: "åº—é¢ä¿®ç¹•/çªç™¼å¤§ç­†æ”¯å‡ºæ™‚ï¼Œæœƒæœ‰å£“åŠ›æ„Ÿå—ï¼Ÿ", options: ["å¯æ‡‰ä»˜", "å¤šå°‘æœ‰å£“åŠ›"] },
          { q: "ä½ æœ‰æ²’æœ‰ç®—éï¼Œæœªä¾†é€€ä¼‘å¾Œæ¯æœˆè¦èŠ±å¤šå°‘ï¼Ÿ", options: ["å·²ä¼°ç®—ä¸¦æº–å‚™", "ç•¥æ“”å¿ƒ"] },
          { q: "å¦‚æœå“ªå¤©ç”Ÿç—…ã€ä¸èƒ½å·¥ä½œå¹¾å€‹æœˆï¼Œé–‹éŠ·æœ‰å‚™æ¡ˆå—ï¼Ÿ", options: ["éƒ¨åˆ†æº–å‚™", "é‚„æ²’æœ‰æº–å‚™"] },
          { q: "å¦‚æœæ¯æœˆæ’¥å¹¾åƒå¡Šï¼Œå»ºç«‹å‚™ç”¨é‡‘ï¼Œä½ è¦ºå¾—å¯¦ç”¨å—ï¼Ÿ", options: [ "è¦çœ‹æ–¹æ¡ˆ", "ä¸éœ€è¦"] },
          { q: "é€™åƒç‚ºè‡ªå·±ç”Ÿæ„æº–å‚™ä¿éšªï¼Œä½ æœƒæƒ³äº†è§£å—ï¼Ÿ", options: ["æƒ³äº†è§£", "å†è§€æœ›"] }
        ],
        "é ˜å°ä¸»ç®¡": [
          { q: "ä½ ç›®å‰åœ˜éšŠå·¥ä½œé‡æ˜¯å¦æ»¿æª”ï¼Ÿ", options: ["éå¸¸å¿™ç¢Œ", "å¶çˆ¾åŠ ç­", "æ™‚é–“å½ˆæ€§"] },
          { q: "æœƒä¸æœƒçŠ§ç‰²æ‰è‡ªå·±èˆ‡å®¶äººçš„æ™‚é–“ï¼Ÿ", options: ["å¸¸çŠ§ç‰²", "å¶çˆ¾", "ç„¡å½±éŸ¿"] },
          { q: "ä½ ç¾åœ¨æœ‰å›ºå®šè³‡ç”¢å„²è“„å—ï¼Ÿ", options: ["å›ºå®šå„²è“„", "éƒ¨åˆ†å„²è“„", "å¹¾ä¹ä¸å­˜"] },
          { q: "è‹¥çªç„¶ç”Ÿç—…ä¸èƒ½å·¥ä½œï¼Œè²¡å‹™æœ‰æº–å‚™å—ï¼Ÿ", options: ["éƒ¨åˆ†æº–å‚™", "æ²’æº–å‚™"] },
          { q: "ä½ è¦ºå¾—æ”¶å…¥è¶³å¤ æ”¯æ’é€€ä¼‘ç”Ÿæ´»å—ï¼Ÿ", options: ["è¶³å¤ ", "å¯èƒ½ä¸è¶³", "å®Œå…¨ä¸æ“”å¿ƒ"] },
          { q: "ç›®å‰è³‡ç”¢é…ç½®æœ‰é€€ä¼‘é‡‘è¨ˆåŠƒå—ï¼Ÿ", options: ["æœ‰è¦åŠƒ", "æ²’æœ‰"] },
          { q: "æ˜¯å¦è€ƒæ…®ç©©å®šç¾é‡‘æµçš„è³‡ç”¢ï¼Ÿ", options: ["å·²å¸ƒå±€", "è€ƒæ…®ä¸­"] },
          { q: "å¦‚æœæœ‰æ–¹å¼æ‰“é€ æœªä¾†ä¿éšœï¼Œä½ è¦ºå¾—æœ‰å¹«åŠ©å—ï¼Ÿ", options: ["å¯ä»¥è©•ä¼°", "æš«ä¸éœ€è¦"] },
          { q: "é€™å°±åƒç‚ºå®¶åº­å»ºä¸€é“é˜²ç·šï¼Œä½ æœ‰èˆˆè¶£å—ï¼Ÿ", options: ["æƒ³äº†è§£", "å†è§€æœ›"] }
        ],
        "è¨ˆç¨‹è»Šå¸æ©Ÿ": [
          { q: "æ‚¨ä¸€å¤©é–‹å¹¾å°æ™‚ï¼Ÿ", options: ["12å°æ™‚ä»¥ä¸Š", "8åˆ°12å°æ™‚", "å°‘æ–¼8å°æ™‚"] },
          { q: "æ”¶å…¥æ˜¯å¦æ³¢å‹•ï¼Ÿ", options: ["å¾ˆç©©å®š", "ç¨æœ‰æ³¢å‹•"] },
          { q: "å¹³å‡æœˆå­˜å¤šå°‘ï¼Ÿ", options: ["è¶…é2è¬", "5000-1è¬", "3000-5000"] },
          { q: "ç„¡æ³•è·‘è»Šæ™‚æœ‰å…¶ä»–æ”¶å…¥å—ï¼Ÿ", options: ["éƒ¨åˆ†æ”¶å…¥", "æ²’æœ‰"] },
          { q: "è¼‰å®¢å°‘æ™‚æœƒä¸æœƒåƒç·Šï¼Ÿ", options: ["æ™šé»ä¸‹ç­", "ç¨å¾®åƒç·Š"] },
          { q: "ä¸èƒ½é–‹è»Šå¹¾å¤©æ”¶å…¥ä¸­æ–·æœƒå½±éŸ¿å—ï¼Ÿ", options: ["ç¨å¾®å½±éŸ¿","ä¸å½±éŸ¿"] },
          { q: "è»Šå­å¤§ä¿®æˆ–çªç™¼é–‹éŠ·æœƒç·Šå¼µå—ï¼Ÿ", options: ["èƒ½æ‡‰ä»˜", "ç¨å¾®æ“”å¿ƒ"] },
          { q: "å¦‚æœæº–å‚™é å‚™åŸºé‡‘ï¼Œä½ è¦ºå¾—å¥½åŠ åœ¨å—ï¼Ÿ", options: ["æœƒè¦ºå¾—å¥½éšª", "æˆ‘ä¸æœƒè»Šç¦"] },
          { q: "é€™ç­†éŒ¢å¯ç•¶é€€ä¼‘è£œè²¼ï¼Œä½ æœƒæƒ³äº†è§£å—ï¼Ÿ", options: ["æƒ³äº†è§£", "å¯ä»¥è€ƒæ…®"] }
        ],
        "å…¬è·/é†«ç™‚": [
          { q: "ç›®å‰å·¥ä½œç¿’æ…£å—ï¼Ÿ", options: ["é‚„è¡Œ", "ä¸å¤ªç¿’æ…£"] },
          { q: "è¼ªç­å½±éŸ¿å¥åº·æˆ–å®¶åº­å—ï¼Ÿ", options: ["ç„¡å½±éŸ¿", "äº›å¾®å½±éŸ¿"] },
          { q: "ä½ æœ‰å„²è“„æˆ–æŠ•è³‡å—ï¼Ÿ", options: ["å°‘é‡å„²è“„", "å¹¾ä¹æ²’æœ‰"] },
          { q: "æœ‰é¡å¤–é€€ä¼‘é‡‘è¦åŠƒå—ï¼Ÿ", options: ["åšéè¦åŠƒ", "æ­£åœ¨è€ƒæ…®"] },
          { q: "çªç™¼æ”¯å‡ºä½ è¦ºå¾—ç¾é‡‘æµå¤ å—ï¼Ÿ", options: ["è¶³å¤ ", "å¯èƒ½ä¸è¶³"] },
          { q: "é€€ä¼‘å¾Œæ¯æœˆé–‹éŠ·å¤ å—ï¼Ÿ", options: ["å¤ ", "å‹‰å¼·å¤ "] },
          { q: "æœªä¾†è‹¥ç„¡æ³•å·¥ä½œï¼Œä½ æœ‰å‚™æ¡ˆå—ï¼Ÿ", options: ["æœ‰å‚™æ¡ˆ", "é‚„æ²’æƒ³é"] },
          { q: "æ¯æœˆæ’¥ä¸€ç­†è£œè¶³ç¼ºå£å¯¦ç”¨å—ï¼Ÿ", options: ["å¯è€ƒæ…®", "é‚„å¥½"] },
          { q: "é€™åƒé˜²è­·ç¶²ï¼Œä½ æœƒæƒ³äº†è§£å—ï¼Ÿ", options: ["æƒ³äº†è§£", "å†çœ‹çœ‹"] }
        ]
      };

      const $ = id => document.getElementById(id);
      const show = (id, f) => { $(id).style.display = f ? 'block' : 'none'; };

      const form = $('questionForm');
      const jobSel = $('job');

      $('nextBtn').addEventListener('click', () => {
        if (!($('name').value.trim() && $('phone').value.trim()
          && $('lineId').value.trim() && $('birthday').value)) {
          alert('è«‹å®Œæ•´å¡«å¯«æ‰€æœ‰åŸºæœ¬è³‡æ–™ï¼');
          return;
        }
        show('basicInfoSection', false);
        show('questionSection', true);
      });

      jobSel.addEventListener('change', () => jobSel.value && buildQuestions());

      function buildQuestions () {
        const qs = spinQuestions[jobSel.value] || [];
        form.innerHTML = '';
        qs.forEach((item, i) => {
          form.insertAdjacentHTML('beforeend', `<label>Q${i+1}. ${item.q}</label>`);
          item.options.forEach(opt => {
            form.insertAdjacentHTML('beforeend',
              `<div><input type="radio" name="q${i}" value="${opt}" required> ${opt}</div>`);
          });
        });
        const btn = document.createElement('button');
        btn.textContent = 'é–‹å§‹è©•ä¼°';
        btn.type = 'button';
        btn.style.marginTop = '25px';
        btn.onclick = () => showResult(qs);
        form.appendChild(btn);
        form.scrollIntoView({ behavior: 'smooth' });
      }

      async function showResult(qs) {
        const ans = qs.map((_, i) => form.querySelector(`input[name="q${i}"]:checked`));
        const miss = ans.findIndex(a => !a);
        if (miss !== -1) return alert(`è«‹å›ç­”ç¬¬ ${miss + 1} é¡Œï¼`);

        const jobSection = document.getElementById('jobSection');
        if (jobSection) jobSection.style.display = 'none';

        form.innerHTML = '';
        const box = document.createElement('div');
        box.className = 'result-container';

        box.innerHTML = `
          <p style="background:#fffae6;border:1px solid #f2c94c;
                    padding:10px;text-align:center;font-weight:600;
                    margin-bottom:15px;">
            è«‹è‡ªè¡Œæˆªåœ–æ­¤è©•ä¼°çµæœï¼Œå‚³é€è‡³ LINE è«®è©¢
          </p>`;

        const info = {
          name: $('name').value,
          phone: $('phone').value,
          line: $('lineId').value,
          bday: $('birthday').value,
          job: jobSel.value
        };

        box.insertAdjacentHTML('beforeend', `
          <table style="width:100%;border:1px solid #ddd;font-size:15px">
            <tr><th style="width:35%">å§“å</th><td>${info.name}</td></tr>
            <tr><th>é›»è©±</th><td>${info.phone}</td></tr>
            <tr><th>Line ID</th><td>${info.line}</td></tr>
            <tr><th>ç”Ÿæ—¥</th><td>${info.bday}</td></tr>
            <tr><th>è·æ¥­</th><td>${info.job}</td></tr>
          </table>`);

        qs.forEach((item, i) => {
          box.insertAdjacentHTML('beforeend', `
            <div class="qa-card">
              <div class="question">Q${i+1}. ${item.q}</div>
              <div class="answer">ğŸ‘‰ ${ans[i].value}</div>
            </div>`);
        });

        form.appendChild(box);
        await html2canvas(box, { scale: 2 });

        const btnWrap = document.createElement('div');
        btnWrap.style.cssText = 'text-align:center;margin:20px 0;';

        const addUrl = `https://line.me/R/ti/p/%40637zzurf`;
        const lineA = document.createElement('a');
        lineA.textContent = 'LINE è«®è©¢';
        lineA.href = addUrl;
        lineA.target = '_blank';
        lineA.style.cssText = `
          display:inline-block;padding:8px 16px;font-size:15px;
          background:#06c755;color:#fff;border:none;border-radius:6px;
          cursor:pointer;text-decoration:none;`;

        lineA.addEventListener('click', e => {
          const ua = navigator.userAgent;
          const isIOS = /\(iP(hone|od|ad);/i.test(ua);
          const isAndroid = /\bAndroid\b/i.test(ua) && !/Windows/i.test(ua);
          const scheme = `line://ti/p/637zzurf`;
          if (isIOS || isAndroid) {
            e.preventDefault();
            location.href = scheme;
            setTimeout(() => location.href = addUrl, 800);
          }
        });

        btnWrap.append(lineA);
        box.insertBefore(btnWrap, box.children[1]);
        box.scrollIntoView({ behavior: 'smooth' });
      }
    });
  </script>
</body>
</html>
